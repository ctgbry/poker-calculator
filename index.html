<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>Midnight Gold 2.0</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root { color-scheme: dark; --gold: #D4AF37; }
    body { background: #0F0F0F; color: var(--gold); font-family: system-ui, sans-serif; overflow: hidden; touch-action: manipulation; }
    .gold-border { border: 1px solid rgba(212,175,55,.3); }
    .gold-border-strong { border: 1.5px solid rgba(212,175,55,.8); }
    .gold-glow { text-shadow: 0 0 12px rgba(212,175,55,.6); }
    .sheet { transform: translateY(100%); transition: transform 0.28s cubic-bezier(0.2, 0.9, 0.2, 1); }
    .sheet.on { transform: translateY(0); }
    .backdrop { opacity: 0; pointer-events: none; transition: 0.28s; background: rgba(0,0,0,0.8); backdrop-filter: blur(4px); }
    .backdrop.on { opacity: 1; pointer-events: auto; }
    @keyframes flash { 0%, 100% { border-color: rgba(212,175,55,.3); } 50% { border-color: #fff; box-shadow: 0 0 10px var(--gold); } }
    .flash-gold { animation: flash 0.5s ease-out; }
    input { background: #050505; border: 1px solid rgba(212,175,55,0.2); border-radius: 14px; padding: 10px 14px; width: 100%; color: var(--gold); font-family: monospace; font-size: 1.25rem; outline: none; transition: 0.2s; }
    input:focus { border-color: var(--gold); }
    .no-select { user-select: none; -webkit-user-select: none; }
  </style>
</head>
<body class="no-select">

  <div class="h-[100dvh] flex flex-col">
    <header class="pt-[calc(env(safe-area-inset-top)+20px)] pb-4 px-6">
      <div class="text-[10px] tracking-[0.3em] opacity-40 uppercase">Midnight Gold 2.0</div>
      <h1 class="text-2xl font-bold italic gold-glow">STRATEGY CORE</h1>
    </header>

    <main class="flex-1 px-4 overflow-y-auto pb-[env(safe-area-inset-bottom)]">
      <div class="grid grid-cols-2 gap-3 mb-6">
        <button onclick="openTool('mdf_bet')" class="h-36 gold-border-strong rounded-[2rem] bg-gradient-to-br from-[#1c1c1c] to-[#080808] flex flex-col items-center justify-center shadow-gold active:scale-95 transition-all">
          <span class="text-lg font-bold">Èù¢Â∞ç‰∏ãÊ≥®</span>
          <span class="text-[10px] opacity-50 tracking-widest">FACING BET</span>
        </button>
        <button onclick="openTool('mdf_raise')" class="h-36 gold-border rounded-[2rem] bg-[#111] flex flex-col items-center justify-center active:scale-95 transition-all">
          <span class="text-lg font-bold">Èù¢Â∞çÂä†Ë®ª</span>
          <span class="text-[10px] opacity-50 tracking-widest">FACING RAISE</span>
        </button>
      </div>

      <div id="grid-sub" class="grid grid-cols-3 gap-3 mb-6">
        </div>
    </main>
  </div>

  <div id="backdrop" class="backdrop fixed inset-0 z-40" onclick="closeTool()"></div>
  <div id="sheet" class="sheet fixed inset-x-0 bottom-0 h-[85dvh] bg-[#0c0c0c] rounded-t-[40px] border-t border-[rgba(212,175,55,0.4)] z-50 p-7 flex flex-col shadow-2xl">
    <div class="w-12 h-1.5 bg-white/10 mx-auto mb-8 shrink-0 rounded-full"></div>
    
    <div class="flex justify-between items-start mb-8 shrink-0">
      <div>
        <h2 id="sheet-title" class="text-2xl font-bold italic">--</h2>
        <p id="sheet-sub" class="text-[10px] opacity-40 uppercase tracking-[0.2em]">--</p>
      </div>
      <button onclick="closeTool()" class="bg-[#1a1a1a] gold-border px-5 py-2.5 rounded-2xl text-[10px] font-bold active:bg-gold active:text-black">ÈóúÈñâ</button>
    </div>

    <div id="input-area" class="grid grid-cols-2 gap-4 mb-8"></div>
    <div id="quick-area" class="space-y-6"></div>
    
    <div class="mt-auto pt-8 border-t border-white/5">
      <div id="result-label" class="text-[10px] opacity-40 tracking-widest uppercase">Result Value</div>
      <div id="result-value" class="text-[72px] font-mono font-bold gold-glow leading-none mt-2">--</div>
    </div>
  </div>

<script>
/**
 * üõ†Ô∏è Ê®°ÁµÑÂåñÈÖçÁΩÆÔºöÊú™‰æÜË¶ÅÊîπÈÄôË£°Â∞±Â•ΩÔºåÊ•µÂø´ÔºÅ
 */
const TOOLS = {
  mdf_bet: {
    title: "Èù¢Â∞ç‰∏ãÊ≥®", sub: "Facing Bet",
    fields: [ { id: "pot", label: "POT Â∫ïÊ±†" }, { id: "opp_bet", label: "OPP BET Â∞çÊâã‰∏ãÊ≥®" } ],
    quick: [ { label: "Â∞çÊâã‰∏ãÊ≥® (Pot %)", type: "bet", values: [ { n: "1/3", v: 0.33 }, { n: "1/2", v: 0.5 }, { n: "Pot", v: 1 } ] } ],
    calc: (v) => ((v.pot / (v.pot + v.opp_bet)) * 100).toFixed(1) + "%"
  },
  mdf_raise: {
    title: "Èù¢Â∞çÂä†Ë®ª", sub: "Facing Raise",
    fields: [ { id: "pot", label: "POT Â∫ïÊ±†" }, { id: "my_bet", label: "MY BET ÊàëÊñπ‰∏ãÊ≥®" }, { id: "raise_to", label: "RAISE TO Âä†Ë®ªÂà∞" } ],
    quick: [ 
      { label: "ÊàëÊñπ‰∏ãÊ≥® (Pot %)", type: "bet", values: [ { n: "1/3", v: 0.33 }, { n: "1/2", v: 0.5 }, { n: "Pot", v: 1 } ] },
      { label: "Â∞çÊâãÂä†Ë®ª (ÂÄçÊï∏)", type: "raise", values: [ { n: "2.5x", v: 2.5 }, { n: "3x", v: 3 }, { n: "4x", v: 4 } ] } 
    ],
    calc: (v) => {
      const reward = v.pot + v.my_bet;
      const risk = v.raise_to + v.pot + v.my_bet;
      return ((reward / risk) * 100).toFixed(1) + "%";
    }
  },
  spr: {
    title: "ÊúâÊïàÁ±åÁ¢º", sub: "SPR",
    fields: [ { id: "pot", label: "POT Â∫ïÊ±†" }, { id: "stack", label: "STACK ÊúâÊïàÁ±åÁ¢º" } ],
    calc: (v) => (v.stack / v.pot).toFixed(2)
  }
};

let currentToolId = null;

function openTool(id) {
    currentToolId = id;
    const tool = TOOLS[id];
    document.getElementById('sheet-title').textContent = tool.title;
    document.getElementById('sheet-sub').textContent = tool.sub;
    
    // Ê∏≤Êüì Input
    document.getElementById('input-area').innerHTML = tool.fields.map(f => `
      <div id="box-${f.id}">
        <label class="text-[10px] opacity-50 ml-1 mb-1.5 block">${f.label}</label>
        <input id="f-${f.id}" type="number" placeholder="0" oninput="doCalc()">
      </div>
    `).join('');
    
    // Ê∏≤ÊüìÂø´Êç∑Èçµ
    document.getElementById('quick-area').innerHTML = (tool.quick || []).map(group => `
      <div>
        <span class="text-[10px] opacity-30 ml-1 italic tracking-widest">${group.label}</span>
        <div class="grid grid-cols-3 gap-3 mt-2">
          ${group.values.map(b => `<button onclick="handleQuick('${group.type}', ${b.v})" class="gold-border rounded-2xl py-3.5 text-xs bg-[#111] active:bg-gold active:text-black transition-all shadow-sm">${b.n}</button>`).join('')}
        </div>
      </div>
    `).join('');

    document.getElementById('backdrop').classList.add('on');
    document.getElementById('sheet').classList.add('on');
    doCalc();
}

function closeTool() {
    document.getElementById('backdrop').classList.remove('on');
    document.getElementById('sheet').classList.remove('on');
}

function handleQuick(type, val) {
    const potInput = document.getElementById('f-pot');
    if (!parseFloat(potInput.value)) {
        potInput.value = 1000;
        document.getElementById('box-pot').classList.add('flash-gold');
        setTimeout(() => document.getElementById('box-pot').classList.remove('flash-gold'), 500);
    }
    const pot = parseFloat(potInput.value);
    
    if (type === 'bet') {
        const target = (currentToolId === 'mdf_bet') ? 'f-opp_bet' : 'f-my_bet';
        document.getElementById(target).value = Math.round(pot * val);
    } else if (type === 'raise') {
        const myBet = parseFloat(document.getElementById('f-my_bet').value) || 0;
        document.getElementById('f-raise_to').value = Math.round(myBet * val);
    }
    doCalc();
}

function doCalc() {
    const tool = TOOLS[currentToolId];
    if (!tool) return;
    const vals = {};
    tool.fields.forEach(f => vals[f.id] = parseFloat(document.getElementById(`f-${f.id}`).value) || 0);
    const result = tool.calc(vals);
    document.getElementById('result-value').textContent = isNaN(parseFloat(result)) ? "--" : result;
}

// ÂàùÂßãÂåñÊ¨°Ë¶ÅÂ∑•ÂÖ∑
const subGrid = document.getElementById('grid-sub');
['spr'].forEach(key => {
    const tool = TOOLS[key];
    subGrid.innerHTML += `<button onclick="openTool('${key}')" class="h-24 gold-border rounded-2xl bg-[#0e0e0e] flex flex-col items-center justify-center active:scale-95 transition-all"><span class="text-sm font-bold">${tool.title}</span><span class="text-[9px] opacity-40">${tool.sub}</span></button>`;
});

</script>
</body>
</html>
